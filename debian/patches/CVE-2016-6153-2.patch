Description: Fix the fix to the temporary directory search algorithm so that it continues to return "." as a fallback if that directory has the correct permissions.
Origin: https://www.sqlite.org/cgi/src/info/b38fe522cfc971b3
Bug-Debian: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=835205
Index: sqlite3-3.11.0/src/os_unix.c
===================================================================
--- sqlite3-3.11.0.orig/src/os_unix.c
+++ sqlite3-3.11.0/src/os_unix.c
@@ -5398,7 +5398,7 @@ static const char *unixTempFileDir(void)
 
   if( !azDirs[0] ) azDirs[0] = getenv("SQLITE_TMPDIR");
   if( !azDirs[1] ) azDirs[1] = getenv("TMPDIR");
-  for(i=0; i<sizeof(azDirs)/sizeof(azDirs[0]); zDir=azDirs[i++]){
+  for(i=0; i<=sizeof(azDirs)/sizeof(azDirs[0]); zDir=azDirs[i++]){
     if( zDir==0 ) continue;
     if( osStat(zDir, &buf) ) continue;
     if( !S_ISDIR(buf.st_mode) ) continue;
